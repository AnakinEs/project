<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Справочник</title>
  <link rel="stylesheet" href="../css/project-test.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200&display=swap" rel="stylesheet">
  <link href="../css/prism.css" rel="stylesheet">
  <script src="../js/prism.js"></script>
  <script src="../js/project.js"></script>
</head>

<body>
  <div class="main-wrapper">
    <main id="content" class="main_content" role="main">
      <article class="main-page-content" lang="ru"> <!-- lang="ru не совсем понял для чего-->
        <section aria-labelledby="Оператор нулевого слияния (??)">
              <h1 id="Оператор нулевого слияния (??)">Оператор нулевого слияния (??)</h1>
              <div class="section-content">
                <div class="note notecard" id="transparent-js">
                  <div class="important_type">Новая возможность</div>
                  <p>Эта возможность была добавлена в язык недавно. В старых браузерах может понадобиться <a
                      href="https://learn.javascript.ru/polyfills">полифил</a>.</p>
                </div>
                <p>Оператор нулевого слияния представляет собой два вопросительных знака <code>??</code>.</p>
                <p>Так как он обрабатывает <code>null</code> и <code>undefined</code> одинаковым образом, то для этой
                  статьи мы введём специальный термин. Для краткости будем говорить, что значение «определено», если оно
                  не равняется ни <code>null</code>, ни <code>undefined</code>.</p>
                <p>Результат выражения <code>a ?? b</code> будет следующим:</p>
                <ul>
                  <li>если <code>a</code> определено, то <code>a</code>,</li>
                  <li>если <code>a</code> не определено, то <code>b</code>.</li>
                </ul>
                <p>Иначе говоря, оператор <code>??</code> возвращает первый аргумент, если он не
                  <code>null/undefined</code>, иначе второй.
                </p>
                <p>Оператор нулевого слияния не является чем-то принципиально новым. Это всего лишь удобный синтаксис,
                  как
                  из двух значений получить одно, которое «определено».</p>
                <p>Вот как можно переписать выражение <code>result = a ?? b</code>, используя уже знакомые нам
                  операторы:
                </p>
                <pre><code class="language-js">result = (a !== null &amp;&amp; a !== undefined) ? a : b;</code></pre>
                <p>Теперь должно быть абсолютно ясно, что делает <code>??</code>. Давайте посмотрим, где это может быть
                  полезно.</p>
                <p>Как правило, оператор <code>??</code> нужен для того, чтобы задать значение по умолчанию для
                  потенциально неопределённой переменной.</p>
                <p>Например, здесь мы отобразим <code>user</code>, если её значение не <code>null/undefined</code>, в
                  противном случае <code>Аноним</code>:</p>
                <pre><code class="language-js">let user;

alert(user ?? "Аноним"); // Аноним (user не существует)</code></pre>
                <p>А вот пример, когда <code>user</code> присвоено значение:</p>
                <pre><code class="language-js">let user = "Иван";

alert(user ?? "Аноним"); // Иван (user существует)</code></pre>
                <p>Кроме этого, можно записать последовательность из операторов <code>??</code>, чтобы получить первое
                  значение из списка, которое не является <code>null/undefined</code>.</p>
                <p>Допустим, у нас есть данные пользователя в переменных <code>firstName</code>, <code>lastName</code>
                  или
                  <code>nickName</code>. Все они могут не существовать, если пользователь решил не вводить
                  соответствующие
                  значение.
                </p>
                <p>Мы хотели бы отобразить имя пользователя, используя одну из этих переменных, или показать «Аноним»,
                  если все они <code>null/undefined</code>.</p>
                <p>Для этого воспользуемся оператором <code>??</code>:</p>
                <pre><code class="language-js">let firstName = null;
let lastName = null;
let nickName = "Суперкодер";

// показывает первое значение, которое определено:
alert(firstName ?? lastName ?? nickName ?? "Аноним"); // Суперкодер</code></pre>
              </div>
            </section>
            <section aria-labelledby="Сравнение с ||">
              <h2 id="Сравнение с ||">Сравнение с ||</h2>
              <div class="section-content">
                <p>Оператор ИЛИ <code>||</code> можно использовать для того же, что и <code>??</code>, как это было
                  показано в предыдущей главе.</p>
                <p>Например, если в приведённом выше коде заменить <code>??</code> на <code>||</code>, то будет тот же
                  самый результат:</p>
                <pre><code class="language-js">let firstName = null;
let lastName = null;
let nickName = "Суперкодер";

// показывает первое истинное значение:
alert(firstName || lastName || nickName || "Аноним"); // Суперкодер</code></pre>
                <p>Исторически сложилось так, что оператор ИЛИ <code>||</code> появился первым. Он существует с самого
                  начала в JavaScript, поэтому разработчики долгое время использовали его для таких целей.</p>
                <p>С другой стороны, сравнительно недавно в язык был добавлен оператор нулевого слияния <code>??</code>
                  –
                  как раз потому, что многие были недовольны оператором <code>||</code>.</p>
                <p>Важное различие между ними заключается в том, что:</p>
                <ul>
                  <li><code>||</code> возвращает первое истинное значение.</li>
                  <li><code>??</code> возвращает первое определённое значение.</li>
                </ul>
                <p>Проще говоря, оператор <code>||</code> не различает <code>false</code>, <code>0</code>, пустую строку
                  <code>""</code> и <code>null/undefined</code>. Для него они все одинаковы, т.е. являются ложными
                  значениями. Если первым аргументом для оператора <code>||</code> будет любое из перечисленных
                  значений,
                  то в качестве результата мы получим второй аргумент.
                </p>
                <p>Однако на практике часто требуется использовать значение по умолчанию только тогда, когда переменная
                  является <code>null/undefined</code>. Ведь именно тогда значение действительно неизвестно/не
                  определено.
                </p>
                <p>Рассмотрим следующий пример:</p>
                <pre><code class="language-js">let height = 0;

alert(height || 100); // 100
alert(height ?? 100); // 0</code></pre>
                <ul>
                  <li><code>height || 100</code> проверяет <code>height</code> на ложное значение, оно равно
                    <code>0</code>, да, ложное.
                  </li>
                  <ul>
                    <li>поэтому результатом <code>||</code> является второй аргумент, т.е. <code>100</code>.</li>
                  </ul>
                  <li><code>height ?? 100</code> проверяет, что переменная <code>height</code> содержит
                    <code>null/undefined</code>, а поскольку это не так,
                  </li>
                  <ul>
                    <li>то результатом является сама переменная <code>height</code>, т.е. <code>0</code>.</li>
                  </ul>
                </ul>
                <p>На практике нулевая высота часто является вполне нормальным значением, которое не следует заменять
                  значением по умолчанию. Таким образом, <code>??</code> здесь как раз работает так, как нужно.</p>
              </div>
            </section>

            <section aria-labelledby="Приоритет">
              <h2 id="Приоритет">Приоритет</h2>
              <div class="section-content">
                <p>Приоритет оператора <code>??</code> такой же, как и у <code>||</code>. Они оба равны <code>4</code> в
                  <a
                    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table">таблице
                    на MDN</a>.
                </p>
                <p>Это означает, что, как и <code>||</code>, оператор нулевого слияния <code>??</code> вычисляется до
                  <code>=</code> и <code>?</code>, но после большинства других операций, таких как <code>+</code>,
                  <code>*</code>.
                </p>
                <p>Так что, в выражениях такого вида понадобятся скобки:</p>
                <pre><code class="language-js">let height = null;
let width = null;

// важно: используйте круглые скобки
let area = (height ?? 100) * (width ?? 50);

alert(area); // 5000</code></pre>
                <p>Иначе, если опустить скобки, оператор <code>*</code> выполнится первым, так как у него приоритет
                  выше,
                  чем у <code>??</code>, и это приведёт к неправильным результатам.</p>
                <pre><code class="language-js">// без скобок
let area = height ?? 100 * width ?? 50;

// ...сработает вот так (совсем не как нам нужно):
let area = height ?? (100 * width) ?? 50;</code></pre>
              </div>
            </section>

            <section aria-labelledby="Использование ?? вместе с && или ||">
              <h2 id="Использование ?? вместе с && или ||">Использование ?? вместе с && или ||</h2>
              <div class="section-content">
                <p>По соображениям безопасности JavaScript запрещает использование оператора <code>??</code> вместе с
                  <code>&&</code> и <code>||</code>, если приоритет явно не указан при помощи круглых скобок.
                </p>
                <p>Выполнение следующего кода приведёт к синтаксической ошибке:</p>
                <pre><code class="language-js">let x = 1 &amp;&amp; 2 ?? 3; // Синтаксическая ошибка</code></pre>
                <p>Это, безусловно спорное, ограничение было добавлено в спецификацию языка с целью избежать программные
                  ошибки, когда люди начнут переходить с <code>||</code> на <code>??</code>.</p>
                <p>Используйте скобки, чтобы обойти это ограничение:</p>
                <pre><code class="language-js">let x = (1 &amp;&amp; 2) ?? 3; // Работает без ошибок

alert(x); // 2</code></pre>
              </div>
            </section>

            <section aria-labelledby="Итого9">
              <h2 id="Итого9">Итого</h2>
              <div class="section-content">
                <ul>
                  <li>
                    <p>Оператор нулевого слияния <code>??</code> — это быстрый способ выбрать первое «определённое»
                      значение из списка.</p>
                    <p>Используется для присвоения переменным значений по умолчанию:</p>
                    <pre><code class="language-js">// будет height=100, если переменная height равна null или undefined
height = height ?? 100;</code></pre>
                    <p></p>
                    <p></p>
                  </li>
                  <li>
                    <p>Оператор <code>??</code> имеет очень низкий приоритет, лишь немного выше, чем у <code>?</code> и
                      <code>=</code>, поэтому при использовании его в выражении, скорее всего, потребуются скобки.
                    </p>
                  </li>
                  <li>
                    <p>Запрещено использовать вместе с <code>||</code> или <code>&&</code> без явно указанного
                      приоритета,
                      то есть без скобок.</p>
                  </li>
                </ul>
              </div>
            </section>
      </article>
    </main>
  </div>
</body>
